<!DOCTYPE html>
<html class="dark">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width" />
  <title>layui-theme-dark</title>
  <script>
    var VERSION='2.8.2';
    var ENV='pord';
    // var ENV='dev';
  </script>
  <script src="./docs/lib/dom-inspector.iife.js"></script>
  <style>
    /* 移动端 */
    @media screen and (max-width: 768px) {

      .layui-layout-admin .layui-layout-left,
      .layui-layout-admin .layui-body,
      .layui-layout-admin .layui-footer {
        left: 0;
      }

      .layui-layout-admin .layui-side {
        left: -300px;
      }

      .site-mobile-shade {
        content: '';
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        background-color: rgba(0, 0, 0, 0.8);
        z-index: 9999;
      }
    }
  </style>
  <style>
    ::view-transition-old(root),
    ::view-transition-new(root) {
      animation: none;
      mix-blend-mode: normal;
    }
  
    ::view-transition-old(root) {
      z-index: 9999;
    }
  
    ::view-transition-new(root) {
      z-index: 1;
    }
  
    .dark::view-transition-old(root) {
      z-index: 1;
    }
  
    .dark::view-transition-new(root) {
      z-index: 9999;
    }
  </style>
</head>

<body>
  <wc-dom-inspector id="domInspector" includes="#body-container"></wc-dom-inspector>
  <div class="layui-layout layui-layout-admin">
    <div class="layui-header">
      <div class="layui-logo layui-hide-xs layui-bg-black">dark demo</div>
      <!-- 头部区域（可配合layui 已有的水平导航） -->
      <ul class="layui-nav layui-layout-left">
        <!-- 移动端显示 -->
        <li class="layui-nav-item layui-show-xs-inline-block layui-hide-sm" lay-header-event="menuLeft">
          <i class="layui-icon layui-icon-spread-left"></i>
        </li>
        <li class="layui-nav-item"><span id="layuiv" style="margin-left: 10px; font-size: 10px"></span></li>
      </ul>
      <ul class="layui-nav layui-layout-right">
        <li class="layui-nav-item">
          <label style="display: flex">
            <input type="checkbox" name="domInspector" />
            &nbsp;&nbsp;dom-inspector&nbsp;&nbsp;
          </label>
        </li>
        <li class="layui-nav-item">
          <i id="toggle-theme" class="layui-icon layui-icon-moon"
            style="display:block;font-size: 20px;padding:0 10px"></i>
        </li>
        <li class="layui-nav-item" lay-header-event="menuRight" lay-unselect>
          <a href="https://github.com/Sight-wcg/layui-theme-dark" target="_blank" style="padding:0 10px">
            <i class="layui-icon layui-icon-github" style="font-size: 20px"></i>
          </a>
        </li>
      </ul>
    </div>

    <div class="layui-side layui-bg-black">
      <div class="layui-side-scroll">
        <!-- 左侧导航区域 -->
        <ul class="layui-nav layui-nav-tree" lay-shrink="all" lay-unselect lay-filter="nav-side">
          <li class="layui-nav-item layui-nav-itemed">
            <a class="" href="javascript:;">基本元素</a>
            <dl class="layui-nav-child">
              <dd><a data-path="view/button" href="javascript:;">按钮</a></dd>
              <dd><a data-path="view/element.nav" href="javascript:;">导航/面包屑</a></dd>
              <dd><a data-path="view/form" href="javascript:;">表单</a></dd>
              <dd><a data-path="view/menu" href="javascript:;">基础菜单</a></dd>
              <dd><a data-path="view/element.tab" href="javascript:;">选项卡</a></dd>
              <dd><a data-path="view/progress" href="javascript:;">进度条</a></dd>
              <dd><a data-path="view/panel" href="javascript:;">面板</a></dd>
              <dd><a data-path="view/badge" href="javascript:;">徽章</a></dd>
              <dd><a data-path="view/timeline" href="javascript:;">时间线</a></dd>
              <dd><a data-path="view/table-static" href="javascript:;">静态表格</a></dd>
              <dd><a data-path="view/auxiliar" href="javascript:;">辅助元素</a></dd>
            </dl>
          </li>
          <li class="layui-nav-item">
            <a href="javascript:;">组件示例</a>
            <dl class="layui-nav-child">
              <dd><a data-path="view/layer" href="javascript:;">弹出层</a></dd>
              <dd><a data-path="view/laydate" href="javascript:;">日期与时间选择</a></dd>
              <dd><a data-path="view/table" href="javascript:;">表格综合</a></dd>
              <dd><a data-path="view/table-test" href="javascript:;">表格操作</a></dd>
              <dd><a data-path="view/treeTable" href="javascript:;">树形表格</a></dd>
              <dd><a data-path="view/laypage" href="javascript:;">分页</a></dd>
              <dd><a data-path="view/upload" href="javascript:;">上传</a></dd>
              <dd><a data-path="view/dropdown" href="javascript:;">下拉菜单</a></dd>
              <dd><a data-path="view/transfer" href="javascript:;">穿梭框</a></dd>
              <dd><a data-path="view/tree" href="javascript:;">树形组件</a></dd>
              <dd><a data-path="view/colorpicker" href="javascript:;">颜色选择器</a></dd>
              <dd><a data-path="view/slider" href="javascript:;">滑块</a></dd>
              <dd><a data-path="view/rate" href="javascript:;">评分</a></dd>
              <dd><a data-path="view/carousel" href="javascript:;">轮播</a></dd>
              <dd><a data-path="view/flow" href="javascript:;">流加载</a></dd>
              <dd><a data-path="view/util" href="javascript:;">工具模块</a></dd>
              <dd><a data-path="view/code" href="javascript:;">文本行修饰</a></dd>
            </dl>
          </li>
        </ul>
      </div>
    </div>

    <div class="layui-body">
      <!-- 内容主体区域 -->
      <div id="body-container" style="padding: 15px">内容主体区域。记得修改 layui.css 和 js 的路径</div>
    </div>

    <!-- <div class="layui-footer">
      底部固定区域
    </div> -->
  </div>
  <script>
    var layuicss="https://unpkg.com/layui@"+VERSION+"/dist/css/layui.css";
    var layuijs="https://unpkg.com/layui@"+VERSION+"/dist/layui.js";
    var CSS={
      dev: [
        {href: layuicss},
        {href: "./src/css-variables.css"},
        {href: "./src/theme.css"}
      ],
      pord: [
        {href: layuicss},
        {id: "layui_theme_css",href: "./dist/layui-theme-dark-legacy.css"}
      ]
    };
    for(var i=0;i<CSS[ENV].length;i++) {
      var css=CSS[ENV][i];
      addLink({
        id: css.id||"",
        href: css.href
      });
    }
    loadScript(layuijs,function() {
      layui
        .config({
          base: './docs/lib/',
        })
        .extend({
          drawer: 'drawer/drawer',
        });
      layui.use(['element','layer','util'],function() {
        var element=layui.element;
        var form=layui.form;
        var layer=layui.layer;
        var util=layui.util;
        var $=layui.$;

        renderView('#body-container','view/button');

        util.event('lay-header-event',{
          menuLeft: function() {
            var side=$('.layui-layout-admin .layui-side');
            side.animate({left: side.css('left')==='0px'? '-300px':'0px'});
          },
        });

        element.on('nav(nav-side)',function(elem) {
          var path=elem.data('path');
          if(path) {
            renderView('#body-container',path);
            if($(window).width()<=768) {
              $('.layui-layout-admin .layui-side').animate({left: '-300px'});
            }
          }
        });

        $(window).resize(function() {
          if($(window).width()>768) {
            $('.layui-layout-admin .layui-side').animate({left: '0px'});
          }
        });

        $('#layuiv').text(layui.v);

        $('input[name=domInspector]').on('click',function() {
          if($(this).prop('checked')) {
            $('#domInspector').attr('enable','');
          } else {
            $('#domInspector').removeAttr('enable');
          }
        });

        $('#toggle-theme').on('click',function(e) {
          var isDark=document.documentElement.classList.contains('dark');
          var othis=$(this);
          var css=$('#layui_theme_css');
          var lightIcon="layui-icon-light";
          var darkIcon="layui-icon-moon";
          
          // https://github.com/vuejs/vitepress/pull/2347
          var isAppearanceTransition=document.startViewTransition&&!window.matchMedia(`(prefers-reduced-motion: reduce)`).matches
          if(isAppearanceTransition) {
            var x=event.clientX
            var y=event.clientY
            var endRadius=Math.hypot(
              Math.max(x,innerWidth-x),
              Math.max(y,innerHeight-y),
            )

            var transition=document.startViewTransition(() => {
              if(isDark) {
                othis.removeClass(darkIcon).addClass(lightIcon);
                css.prop("href","");
                document.documentElement.classList.remove('dark')
              } else {
                othis.removeClass(lightIcon).addClass(darkIcon);
                css.prop('href','./dist/layui-theme-dark.css');
                document.documentElement.classList.add('dark')
              }
              isDark=!isDark
            })
            transition.ready.then(() => {
              const clipPath=[
                `circle(0px at ${x}px ${y}px)`,
                `circle(${endRadius}px at ${x}px ${y}px)`,
              ]
              console.log(isDark)
              document.documentElement.animate(
                {
                  clipPath: isDark? clipPath:[...clipPath].reverse(),
                },
                {
                  duration: 300,
                  easing: 'ease-in',
                  pseudoElement: isDark? '::view-transition-new(root)':'::view-transition-old(root)',
                },
              )
            })
          }else{
            if(isDark) {
              othis.removeClass(darkIcon).addClass(lightIcon);
              css.prop("href","");
              document.documentElement.classList.remove('dark')
            } else {
              othis.removeClass(lightIcon).addClass(darkIcon);
              css.prop('href','./dist/layui-theme-dark.css');
              document.documentElement.classList.add('dark')
            }
            isDark=!isDark
          }
         
        });

        function renderView(elem,path,prefix,suffix) {
          var containerDom=$(elem);
          if(!prefix) prefix='./docs/';
          if(!suffix) suffix='.html';
          $.ajax({
            url: prefix+path+suffix,
            dataType: 'html',
            success: function(res) {
              containerDom.html(res);
              element.render();
              form.render();
            },
          });
        }
      });
    });

    function addStyle(id,cssStr) {
      var el=document.getElementById(id)||document.createElement('style');
      if(!el.isConnected) {
        el.type='text/css';
        el.id=id;
        document.head.appendChild(el);
      }
      el.textContent=cssStr;
    }

    function addLink(opt) {
      var link=document.createElement('link');
      link.id=opt.id;
      link.rel='stylesheet';
      link.href=opt.href;
      document.head.appendChild(link);
    }

    function loadScript(url,callback) {
      var script=document.createElement('script');
      script.type='text/javascript';
      script.async='async';
      script.src=url;
      document.body.appendChild(script);
      if(script.readyState) {
        script.onreadystatechange=function() {
          if(script.readyState=='complete'||script.readyState=='loaded') {
            script.onreadystatechange=null;
            callback&&callback();
          }
        };
      } else {
        script.onload=function() {
          callback&&callback();
        };
      }
    }

  </script>
</body>

</html>